---
layout: post
title: Installing and Running the MinGW Windows C Compiler on Linux
date: '2010-02-13T14:35:00.001+11:00'
author: Stephen Bradshaw
tags:
- malware analysis
- compiler
- shellcode
- incident response
- backtrack
modified_time: '2010-02-13T22:09:51.262+11:00'
thumbnail: http://2.bp.blogspot.com/_e7K39d4GimA/S3YcP1yazZI/AAAAAAAAALA/etI8mrH6J4s/s72-c/mingw1.png
blogger_id: tag:blogger.com,1999:blog-2318886372568084567.post-4622670680845602838
blogger_orig_url: http://www.thegreycorner.com/2010/02/installing-and-running-mingw-windows-c.html
redirect_from: /2010/02/installing-and-running-mingw-windows-c.html
---

Having a working Windows c compiler on your Linux system can be very handy for penetration testing and incident response activities, as it allows you to create executables from Windows shellcode to aid in analysis or to compile Windows c based exploits so you can run them on your Linux box using wine.<br/><br/>In this post I will briefly cover the steps required to install the MinGW C compiler on a Linux system.<br/><br/>In order to achieve this, you will need a working version of wine, and you will need to be running your Linux system in GUI mode. Many Linux distributions will have wine available in their repositories, otherwise you can install it from <a href="http://www.winehq.org/">here</a>.  I am performing the following steps on BackTrack 4 where wine comes installed by default.<br/><br/><span style="color: blue;">Edit: ColForbin over at the BackTrack forums just kindly pointed out to me that MinGW comes installed by default on BackTrack 4 Final.  I apparently missed this because I run BackTrack as a non root user (against the recommendations of the BackTrack Developers by the way), and MinGW is only installed under the root users home directory.  So if you use BackTrack 4 Final, you only need to do the install of MinGW if you run as a non root user. </span><br/><br/>Start  by download the latest version of the installer from <a href="http://sourceforge.net/projects/mingw/files/Automated%20MinGW%20Installer/">here</a>.<br/><br/>Now run the installer using wine.<br/><blockquote>user@bt4:~/Downloads$ wine MinGW-5.1.6.exe</blockquote>The installer window will appear, as shown below.<br/><br/><div class="separator" style="clear: both; text-align: center;"><a href="/assets/img/2010-02-13-installing-and-running-mingw-windows-c_large_mingw1.png"><img border="0" src="/assets/img/2010-02-13-installing-and-running-mingw-windows-c_large_mingw1.png"/></a></div><br/><br/>Hit Next and follow the bouncing ball through the first few steps, accepting the defaults.<br/><br/>When asked where to install MinGW, install it to the path in the C:\ drive, which wine creates under your home folder in ~/.wine/drive_c/.<br/><br/><div class="separator" style="clear: both; text-align: center;"><a href="/assets/img/2010-02-13-installing-and-running-mingw-windows-c_large_mingw2.png"><img border="0" src="/assets/img/2010-02-13-installing-and-running-mingw-windows-c_large_mingw2.png"/></a></div><br/><br/>Progress through the installer, then wait while the components of MinGW are downloaded and installed.<br/><br/><div class="separator" style="clear: both; text-align: center;"><a href="/assets/img/2010-02-13-installing-and-running-mingw-windows-c_large_mingw3.png"><img border="0" src="/assets/img/2010-02-13-installing-and-running-mingw-windows-c_large_mingw3.png"/></a> </div><div class="separator" style="clear: both; text-align: left;"><br/></div><div class="separator" style="clear: both; text-align: left;"></div>Once the install is done hit Finish.<br/><br/><br/><div class="separator" style="clear: both; text-align: center;"><a href="/assets/img/2010-02-13-installing-and-running-mingw-windows-c_large_mingw5.png"><img border="0" src="/assets/img/2010-02-13-installing-and-running-mingw-windows-c_large_mingw5.png"/></a></div><br/><br/>To actually use the compiler, run it as follows:<br/><blockquote>user@bt4:~$ wine ~/.wine/drive_c/MinGW/bin/gcc.exe<br/>gcc.exe: no input files</blockquote>To compile a Windows c source file into an executable:<br/><blockquote>user@bt4:~$ wine ~/.wine/drive_c/MinGW/bin/gcc.exe code.c -o code.exe</blockquote>For programs that require the use of particular libraries, you can also use one of the following command line switches to gcc to compile a given program using the given library:<br/><ul><li> -l[library name]</li><li> -Xlinker [Full path to library file]</li></ul><br/>Examples:<br/><br/>Use the wsock32 library:<br/>-lwsock32<br/><br/>Use the GDI32 library:<br/>-Xlinker C:/mingw/lib/libgdi32.a